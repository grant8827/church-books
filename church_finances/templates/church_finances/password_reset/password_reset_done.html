{% extends 'base.html' %}
{% load static %}

{% block title %}Reset Password Sent - Church Finance App{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-md mx-auto">
        <!-- Breadcrumb -->
        <nav class="mb-6">
            <ol class="flex items-center space-x-2 text-sm text-gray-600">
                <li><a href="{% url 'home' %}" class="hover:text-blue-600">Home</a></li>
                <li><span class="mx-2">‚Üí</span></li>
                <li><a href="{% url 'login' %}" class="hover:text-blue-600">Login</a></li>
                <li><span class="mx-2">‚Üí</span></li>
                <li class="text-gray-800 font-medium">Password Reset Sent</li>
            </ol>
        </nav>

        <div class="bg-white shadow-lg rounded-lg p-8 border-t-4 border-green-500">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                    <i class="fas fa-check text-3xl text-white"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">‚úâÔ∏è Email Sent Successfully!</h1>
                <p class="text-gray-600 text-lg">We've sent password reset instructions to your email address</p>
            </div>

            <!-- Success Message -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <i class="fas fa-check-circle text-green-600 mt-0.5"></i>
                    </div>
                    <div class="ml-3">
                        <h4 class="text-sm font-medium text-green-800">Password reset email sent successfully</h4>
                        <div class="text-sm text-green-700 mt-2 space-y-1">
                            <p>‚Ä¢ We've sent you instructions for setting your new password</p>
                            <p>‚Ä¢ The reset link will expire in 24 hours for security</p>
                            <p>‚Ä¢ If you don't see the email, please check your spam folder</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Information Notice -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <i class="fas fa-info-circle text-blue-600 mt-0.5"></i>
                    </div>
                    <div class="ml-3">
                        <h4 class="text-sm font-medium text-blue-800">What's Next?</h4>
                        <p class="text-sm text-blue-700 mt-1">
                            Click the secure link in your email to create a new password. The link will take you to a safe page where you can set your new credentials.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="{% url 'login' %}" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md inline-flex items-center justify-center transition-all duration-200 transform hover:scale-105">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Login
                </a>
                <a href="{% url 'password_reset' %}" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-md inline-flex items-center justify-center transition-all duration-200 transform hover:scale-105">
                    <i class="fas fa-envelope mr-2"></i>Resend Email
                </a>
            </div>

            <!-- Countdown Timer -->
            <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                <div class="text-center">
                    <p class="text-sm font-medium text-yellow-800">‚è∞ Didn't receive the email?</p>
                    <p class="text-sm text-yellow-700 mt-1">
                        You can request another reset email in <span id="countdown" class="font-mono font-bold">60</span> seconds
                    </p>
                    <div class="w-full bg-yellow-200 rounded-full h-2 mt-3">
                        <div id="countdown-bar" class="bg-yellow-500 h-2 rounded-full transition-all duration-1000" style="width: 100%"></div>
                    </div>
                </div>
            </div>

            <!-- Additional Help -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <div class="text-center">
                    <p class="text-sm text-gray-600 mb-2">ü§î Still having trouble?</p>
                    <p class="text-sm text-gray-500">
                        Check your spam folder, or contact your church administrator for assistance.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Countdown timer functionality
    const countdownElement = document.getElementById('countdown');
    const countdownBar = document.getElementById('countdown-bar');
    const resendLink = document.querySelector('a[href*="password_reset"]');
    
    let timeRemaining = 60; // 60 seconds countdown
    const totalTime = 60;
    
    // Disable resend link initially
    resendLink.style.pointerEvents = 'none';
    resendLink.style.opacity = '0.5';
    
    const countdownInterval = setInterval(function() {
        timeRemaining--;
        countdownElement.textContent = timeRemaining;
        
        // Update progress bar
        const progress = ((totalTime - timeRemaining) / totalTime) * 100;
        countdownBar.style.width = (100 - progress) + '%';
        
        if (timeRemaining <= 0) {
            clearInterval(countdownInterval);
            
            // Enable resend link
            resendLink.style.pointerEvents = 'auto';
            resendLink.style.opacity = '1';
            resendLink.classList.add('ring-2', 'ring-green-300');
            
            // Update countdown text
            countdownElement.parentElement.innerHTML = '<span class="text-green-600 font-medium">‚úÖ You can now request another reset email</span>';
        }
    }, 1000);
    
    // Add animation to success icon
    const successIcon = document.querySelector('.fa-check');
    if (successIcon) {
        setInterval(function() {
            successIcon.parentElement.classList.add('animate-bounce');
            setTimeout(() => {
                successIcon.parentElement.classList.remove('animate-bounce');
            }, 1000);
        }, 3000);
    }
});
</script>

{% endblock %}
