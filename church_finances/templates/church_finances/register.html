{% extends 'base.html' %}
{% load static %}

{% block title %}Register - Church Finance App{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-6xl mx-auto">
        <!-- Breadcrumb -->
        <nav class="mb-6">
            <ol class="flex items-center space-x-2 text-sm text-gray-600">
                <li><a href="{% url 'home' %}" class="hover:text-blue-600">Home</a></li>
                <li><span class="mx-2">â†’</span></li>
                <li class="text-gray-800 font-medium">Church Registration</li>
            </ol>
        </nav>

        <div class="bg-white shadow-md rounded-lg p-6">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-church text-blue-600 mr-3"></i>Church Registration
                    </h1>
                    <p class="text-gray-600">Create your account and register your church to get started</p>
                </div>
            </div>

            <form method="post" class="space-y-8">
                {% csrf_token %}
                
                <!-- Account Information -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-user-circle text-blue-600 mr-3"></i>Account Information
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-1">
                            <label for="{{ user_form.username.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.username.label }} *</label>
                            <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.username.id_for_label }}" name="{{ user_form.username.name }}" value="{{ user_form.username.value|default:'' }}" required>
                            {% if user_form.username.help_text %}
                                <p class="text-xs text-gray-500 mt-1">{{ user_form.username.help_text }}</p>
                            {% endif %}
                            {% for error in user_form.username.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ user_form.email.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.email.label }} *</label>
                            <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.email.id_for_label }}" name="{{ user_form.email.name }}" value="{{ user_form.email.value|default:'' }}" required>
                            {% for error in user_form.email.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ user_form.first_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.first_name.label }} *</label>
                            <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.first_name.id_for_label }}" name="{{ user_form.first_name.name }}" value="{{ user_form.first_name.value|default:'' }}" required>
                            {% for error in user_form.first_name.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ user_form.last_name.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.last_name.label }} *</label>
                            <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.last_name.id_for_label }}" name="{{ user_form.last_name.name }}" value="{{ user_form.last_name.value|default:'' }}" required>
                            {% for error in user_form.last_name.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ user_form.password1.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.password1.label }} *</label>
                            <input type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.password1.id_for_label }}" name="{{ user_form.password1.name }}" required>
                            {% if user_form.password1.help_text %}
                                <p class="text-xs text-gray-500 mt-1">{{ user_form.password1.help_text }}</p>
                            {% endif %}
                            {% for error in user_form.password1.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ user_form.password2.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ user_form.password2.label }} *</label>
                            <input type="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ user_form.password2.id_for_label }}" name="{{ user_form.password2.name }}" required>
                            {% if user_form.password2.help_text %}
                                <p class="text-xs text-gray-500 mt-1">{{ user_form.password2.help_text }}</p>
                            {% endif %}
                            {% for error in user_form.password2.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Church Information -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-church text-purple-600 mr-3"></i>Church Information
                    </h2>
                    
                    <!-- Policy Information -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <h4 class="text-sm font-medium text-blue-800">One Church Per Account Policy</h4>
                                <p class="text-sm text-blue-700 mt-1">
                                    Each user account can only register one church. This helps maintain data integrity and prevents confusion. 
                                    If you need to register multiple churches, please use separate user accounts for each church.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2 space-y-1">
                            <label for="{{ church_form.name.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ church_form.name.label }} *</label>
                            <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ church_form.name.id_for_label }}" name="{{ church_form.name.name }}" value="{{ church_form.name.value|default:'' }}" required>
                            {% for error in church_form.name.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ church_form.email.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ church_form.email.label }} *</label>
                            <input type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ church_form.email.id_for_label }}" name="{{ church_form.email.name }}" value="{{ church_form.email.value|default:'' }}" required>
                            {% for error in church_form.email.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="space-y-1">
                            <label for="{{ church_form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ church_form.phone.label }} *</label>
                            <input type="tel" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ church_form.phone.id_for_label }}" name="{{ church_form.phone.name }}" value="{{ church_form.phone.value|default:'' }}" required>
                            {% for error in church_form.phone.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="md:col-span-2 space-y-1">
                            <label for="{{ church_form.website.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ church_form.website.label }}</label>
                            <input type="url" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="{{ church_form.website.id_for_label }}" name="{{ church_form.website.name }}" value="{{ church_form.website.value|default:'' }}" placeholder="https://www.yourchurch.com">
                            {% for error in church_form.website.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                        <div class="md:col-span-2 space-y-1">
                            <label for="{{ church_form.address.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ church_form.address.label }} *</label>
                            <textarea class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical" id="{{ church_form.address.id_for_label }}" name="{{ church_form.address.name }}" rows="3" placeholder="Street address, city, state, zip" required>{{ church_form.address.value|default:'' }}</textarea>
                            {% for error in church_form.address.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="flex justify-between items-center pt-6 border-t border-gray-200">
                    <div>
                        <small class="text-gray-500">* Required fields</small>
                    </div>
                    <div class="flex space-x-4">
                        <a href="{% url 'home' %}" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded inline-flex items-center">
                            <i class="fas fa-times mr-2"></i>Cancel
                        </a>
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center">
                            <i class="fas fa-plus-circle mr-2"></i>Register Church
                        </button>
                    </div>
                </div>
            </form>

            <div class="mt-6 pt-6 border-t border-gray-200 text-center">
                <p class="text-gray-600">
                    Already have an account? <a href="{% url 'login' %}" class="text-blue-600 hover:text-blue-800 font-medium">Login here</a>
                </p>
            </div>
        </div>
    </div>
</div>

{% endblock %}