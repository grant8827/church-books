{% extends 'base.html' %}

{% block title %}Register - Church Finance App{% endblock %}

{% block content %}
<div class="flex items-center justify-center min-h-screen py-12 px-4 sm:px-6 lg:px-8">
  
    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl">
        <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Register</h2>
        
        <form method="post" class="space-y-6">
            {% csrf_token %}
            <!-- User Registration Section -->
            <div class="bg-gray-200 p-6 rounded-lg mb-6">
                <h3 class="text-xl font-semibold mb-4 text-gray-700">Account Information</h3>
                {% for field in user_form %}
                    <div class="mb-4">
                        <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                            {{ field.label }}
                        </label>
                        {{ field }}
                        {% if field.help_text %}
                            <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
                        {% endif %}
                        {% for error in field.errors %}
                            <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>

            <!-- Church Selection Section -->
            <div class="bg-gray-200 p-6 rounded-lg mb-6">
                <h3 class="text-xl font-semibold mb-4 text-gray-700">Church Information</h3>
                
                <!-- Policy Information -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h4 class="text-sm font-medium text-blue-800">One Church Per Account Policy</h4>
                            <p class="text-sm text-blue-700 mt-1">
                                Each user account can only register one church. This helps maintain data integrity and prevents confusion. 
                                If you need to register multiple churches, please use separate user accounts for each church.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Church Registration Form -->
                <div class="space-y-4">
                    {% for field in church_form %}
                        <div class="mb-4 border">
                            <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                {{ field.label }}
                            </label>
                            {{ field }}
                            {% if field.help_text %}
                                <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
                            {% endif %}
                            {% for error in field.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>

            <button type="submit"
                    class="w-full bg-[#6e003d] hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
                Register
            </button>
        </form>

        <p class="mt-4 text-center text-gray-600">
            Already have an account? <a href="{% url 'login' %}" class="text-blue-900 hover:underline">Login here</a>.
        </p>
    </div>
</div>


{% endblock %}